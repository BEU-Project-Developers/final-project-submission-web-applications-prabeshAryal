@model MusicApp.Models.DTOs.SearchResultsDto
@{
    ViewData["Title"] = "Search Results";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">Search Results</h2>
            @if (!string.IsNullOrEmpty(ViewBag.SearchQuery))
            {
                <div class="alert alert-info">
                    <p class="mb-0">You searched for: <strong>@ViewBag.SearchQuery</strong></p>
                </div>

                @if ((Model?.Songs?.Count ?? 0) == 0 && (Model?.Albums?.Count ?? 0) == 0 && (Model?.Artists?.Count ?? 0) == 0 && (Model?.Playlists?.Count ?? 0) == 0)
                {
                    <div class="mt-5 text-center py-5">
                        <i class="bi bi-search" style="font-size: 4rem; color: var(--ytm-text-secondary);"></i>
                        <h4 class="mt-3">No results found</h4>
                        <p class="text-muted">We couldn't find any matches for your search</p>
                    </div>
                }
                else
                {
                    <div class="row">
                        @if (Model.Songs != null && Model.Songs.Count > 0)
                        {
                            <div class="col-12 mb-4">
                                <h4>Songs</h4>
                                <ul class="list-group">
                                    @foreach (var song in Model.Songs)
                                    {
                                        <li class="list-group-item d-flex align-items-center">
                                            <img src="@(song.CoverImageUrl ?? "/images/default-cover.png")" alt="cover" style="width:40px;height:40px;object-fit:cover;margin-right:1rem;">
                                            <div class="flex-grow-1">
                                                <strong>@song.Title</strong> <span class="text-muted">by @song.ArtistName</span>
                                            </div>
                                            @if (song.AlbumId != null)
                                            {
                                                <a href="/Albums/Details/@song.AlbumId" class="btn btn-sm btn-outline-secondary ms-2">Album</a>
                                            }
                                            <a href="/Songs/Details/@song.Id" class="btn btn-sm btn-primary ms-2">View</a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        }
                        @if (Model.Albums != null && Model.Albums.Count > 0)
                        {
                            <div class="col-12 mb-4">
                                <h4>Albums</h4>
                                <ul class="list-group">
                                    @foreach (var album in Model.Albums)
                                    {
                                        <li class="list-group-item d-flex align-items-center">
                                            <img src="@(album.CoverImageUrl ?? "/images/default-cover.png")" alt="cover" style="width:40px;height:40px;object-fit:cover;margin-right:1rem;">
                                            <div class="flex-grow-1">
                                                <strong>@album.Title</strong> <span class="text-muted">by @album.ArtistName</span>
                                            </div>
                                            <a href="/Albums/Details/@album.Id" class="btn btn-sm btn-primary ms-2">View</a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        }
                        @if (Model.Artists != null && Model.Artists.Count > 0)
                        {
                            <div class="col-12 mb-4">
                                <h4>Artists</h4>
                                <ul class="list-group">
                                    @foreach (var artist in Model.Artists)
                                    {
                                        <li class="list-group-item d-flex align-items-center">
                                            <img src="@(artist.ImageUrl ?? "/images/default-artist.png")" alt="artist" style="width:40px;height:40px;object-fit:cover;margin-right:1rem;">
                                            <div class="flex-grow-1">
                                                <strong>@artist.Name</strong>
                                            </div>
                                            <a href="/Artists/Details/@artist.Id" class="btn btn-sm btn-primary ms-2">View</a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        }
                        @if (Model.Playlists != null && Model.Playlists.Count > 0)
                        {
                            <div class="col-12 mb-4">
                                <h4>Playlists</h4>
                                <ul class="list-group">
                                    @foreach (var playlist in Model.Playlists)
                                    {
                                        <li class="list-group-item d-flex align-items-center">
                                            <img src="@(playlist.CoverImageUrl ?? "/images/default-playlist.png")" alt="playlist" style="width:40px;height:40px;object-fit:cover;margin-right:1rem;">
                                            <div class="flex-grow-1">
                                                <strong>@playlist.Name</strong> <span class="text-muted">by @playlist.Username</span>
                                            </div>
                                            <a href="/Playlists/Details/@playlist.Id" class="btn btn-sm btn-primary ms-2">View</a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        }
                    </div>
                }
            }
            else
            {
                <div class="alert alert-warning">
                    <p class="mb-0">Please enter a search query</p>
                </div>
            }
            <div class="mt-4">
                <a href="/" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to Home
                </a>
            </div>
        </div>
    </div>
</div>